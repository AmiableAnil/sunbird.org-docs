<h2 id="overview">Overview</h2>

<p>Sunbird version 1.4 onwards has a simplified installation procedure wherein all the fine-tuned configurations that were earlier manually configured, are automatically deployed. The entire installlation process takes approximately 45 minutes.</p>

<p>You could also choose to follow the detailed installation procedures provided at<a href="http://www.sunbird.org/developer-docs/installation/server_installation/" target="_blank">Server Installation</a>.</p>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
  <li>
    <p>Availability of 2 Virtual Machines (VMs) - one for the application server and the other for the database server. Both servers must have the following minimum system requirements:</p>

    <ul>
      <li><strong>Operating System:</strong> Ubuntu 16.04 LTS</li>
      <li><strong>RAM:</strong> 7GB</li>
      <li><strong>CPU:</strong> 2 cores, &gt; 2 GHz</li>
      <li><strong>root access</strong> Should be able to sudo</li>
    </ul>
  </li>
  <li>
    <p>Access to a Fully Qualified Domain Name (FQDN) For example: test.sunbird.org).</p>
  </li>
</ul>

<p><strong>Note:</strong> If you’re testing Sunbird, you don’t have to buy an FQDN. All cloud providers give free domain names for their instances.<br />
For example, Azure: sunbird-test.centralindia.cloudapp.azure.com. Check with the cloud provider for details.</p>

<ul>
  <li>A valid <a href="https://en.wikipedia.org/wiki/Public_key_certificate#TLS/SSL_server_certificate" target="_blank">SSL certificate</a> for your domain.</li>
</ul>

<p><strong>Note:</strong> To generate free SSL, use <a href="https://letsencrypt.org/" target="_blank">Let’s Encrypt</a> for most common cases. The script does not support some free domain names, provided by cloud providers. For example, the AWS provided free domain names ec2-13-127-177-29.ap-south-1.compute.amazonaws.com, is not supported because of spammers. If the script is not compatible with your cloud provider, purchase a certificate or get a <a href="http://dot.tk" target="_blank">free one</a>.</p>

<ul>
  <li>
    <p>A git installation for Debian/Ubuntu</p>

    <p><code>apt install git -y</code></p>
  </li>
  <li>
    <p>Ensure that the two servers - application and DB - are able to ping each other</p>
  </li>
</ul>

<p><strong>Note</strong> If you are in AWS, you have to open a few ports between security groups. To test, we opened all ports between these private security groups.</p>

<ul>
  <li>
    <p>Ensure the application server can access port 443 from the internet</p>
  </li>
  <li>
    <p>Get the <a href="http://www.sunbird.org/developer-docs/telemetry/authtokengenerator_jslibrary/#how-to-generate-authorization-credentials" target="_blank">Ekstep API keys</a></p>
  </li>
</ul>

<h3 id="simplified-sunbird-installation-procedure">Simplified Sunbird Installation Procedure</h3>

<ol>
  <li>
    <p>Log in to your application server using ssh</p>
  </li>
  <li>
    <p>Clone the sunbird repository using the command:</p>

    <p><code>git clone https://github.com/project-sunbird/sunbird-devops</code></p>
  </li>
  <li>
    <p>Go to the deploy directory using the command:</p>
  </li>
</ol>

<p><code>cd sunbird-devops/deploy</code></p>

<ol>
  <li>
    <p>If you do not have a valid ssl certificate and have a valid domain name, get the valid ssl certificate from <a href="https://letsencrypt.org/" target="_blank">Let’s Encrypt</a> using the command:
 execute <code>./certbot.sh</code></p>
  </li>
  <li>
    <p>Edit all the mandatory fields in the deploy/config file</p>
  </li>
  <li>
    <p>Install sunbird using the command:</p>

    <p><code>./sunbird_install.sh</code></p>
  </li>
  <li>
    <p>Open https://[ domain-name ]/auth and complete the <a href="http://www.sunbird.org/developer-docs/installation/keycloak_realm_configuration">keycloak configuration</a>.</p>
  </li>
  <li>
    <p>Copy the value of the <code>jwt token for player</code> from <strong>~/jwt_token.txt</strong> file present in your home directory.</p>
  </li>
  <li>
    <p>Paste the same value in the deploy/config file for the <strong>ekstep_auth_token</strong> parameter.</p>
  </li>
</ol>

<p><strong>For example:</strong></p>

<p><code>JWT token for player is : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3TRlZmNlYzc0NY0NjBhYzQzNCJ9.VCf69</code></p>

<ol>
  <li>
    <p><a href="https://community.ekstep.in/developer-knowledgebase/45-getting-started-with-apis">Genereate a jwt token</a> using the key provided by the Ekstep infrastructure and update the <strong>ekstep_api_key</strong> parameter in deploy/config file</p>
  </li>
  <li>
    <p>Install the core Sunbird services using the command:</p>

    <p><code>./sunbird_installation.sh -s core</code></p>
  </li>
  <li>
    <p>Open https://[domain-name] and verify the installation</p>
  </li>
</ol>

